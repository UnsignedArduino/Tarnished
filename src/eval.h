#pragma once
#include <stdint.h>
#include <ctype.h>
#include <stdlib.h>
#include <string.h>
#include "external/chess.hpp"

using namespace chess;

#define MATE 31000
#define INFINITE MATE + 1
#define NO_SCORE MATE + 2

#define MakeScore(mg, eg) ((int32_t)((uint32_t)(eg) << 16) + (mg))
#define S(mg, eg) MakeScore((mg), (eg))
#define MgScore(s) ((int16_t)((uint16_t)((uint32_t)((s)))))
#define EgScore(s) ((int16_t)((uint16_t)((uint32_t)((s) + 0x8000) >> 16)))

typedef int32_t Score;

const int PhaseValues[6] = {0, 1, 1, 2, 4, 0};

const Score PieceTypeValues[6] = {S(65, 183), S(344, 473), S(304, 513), S(555, 816), S(1166, 1442), S(0, 0)};

const Score PSQT[6][64] = {
    {S(0, 0), S(0, 0), S(0, 0), S(0, 0), S(0, 0), S(0, 0), S(0, 0), S(0, 0), S(-86, 139), S(-93, 140), S(34, 84), S(76, 72), S(52, 80), S(31, 124), S(49, 136), S(48, 145), S(0, -8), S(43, -15), S(94, -35), S(25, -54), S(6, -42), S(10, -10), S(7, 18), S(-20, 30), S(-9, -33), S(12, -25), S(23, -49), S(13, -49), S(0, -58), S(-10, -31), S(-2, -13), S(-19, -3), S(-8, -43), S(10, -33), S(-1, -42), S(-2, -48), S(-13, -49), S(-11, -45), S(-8, -20), S(-19, -22), S(-3, -50), S(15, -35), S(-2, -37), S(-6, -35), S(-16, -44), S(-20, -40), S(-13, -27), S(-21, -32), S(-3, -55), S(22, -31), S(6, -24), S(-22, -21), S(-23, -31), S(-26, -28), S(-14, -23), S(-18, -26), S(0, 0), S(0, 0), S(0, 0), S(0, 0), S(0, 0), S(0, 0), S(0, 0), S(0, 0), },
    {S(-88, -107), S(16, -20), S(-78, 31), S(67, -12), S(10, -12), S(-76, 3), S(-96, -14), S(-113, -96), S(54, -53), S(7, -17), S(94, -32), S(68, 2), S(63, 10), S(50, -20), S(12, -27), S(13, -53), S(47, -29), S(58, 0), S(101, 21), S(83, 11), S(55, 21), S(50, 17), S(28, -6), S(1, -38), S(48, -7), S(22, 32), S(56, 31), S(29, 42), S(58, 33), S(44, 20), S(30, 0), S(23, -34), S(34, -7), S(59, 6), S(33, 26), S(37, 28), S(28, 29), S(22, 24), S(23, -4), S(11, -30), S(12, -44), S(23, -15), S(15, -15), S(31, 3), S(25, 7), S(8, -11), S(8, -21), S(-1, -72), S(16, -33), S(-10, -38), S(10, -40), S(5, -16), S(16, -20), S(-1, -38), S(-19, -25), S(-9, -55), S(-32, -116), S(13, -64), S(14, -47), S(15, -39), S(3, -36), S(-22, -55), S(11, -88), S(-57, -100), },
    {S(12, -32), S(38, -39), S(-90, -19), S(-52, -26), S(-56, -18), S(-84, -13), S(-17, -20), S(-3, -11), S(2, -34), S(0, -25), S(30, -34), S(17, -33), S(10, -31), S(28, -32), S(37, -29), S(0, -34), S(17, -27), S(61, -29), S(59, -23), S(66, -42), S(47, -42), S(70, -39), S(45, -33), S(28, -32), S(21, -26), S(43, -23), S(59, -37), S(51, -27), S(72, -32), S(42, -40), S(51, -34), S(19, -42), S(37, -42), S(41, -38), S(33, -35), S(52, -33), S(44, -33), S(40, -29), S(34, -46), S(29, -53), S(59, -39), S(43, -53), S(40, -42), S(38, -35), S(41, -36), S(36, -41), S(34, -41), S(28, -55), S(50, -80), S(47, -54), S(30, -59), S(30, -45), S(26, -52), S(42, -59), S(38, -72), S(41, -52), S(42, -61), S(32, -54), S(34, -53), S(18, -50), S(9, -53), S(34, -72), S(46, -53), S(42, -68), },
    {S(55, -19), S(53, -18), S(3, -2), S(-22, 2), S(-20, -2), S(-37, 6), S(6, -11), S(3, -16), S(31, -32), S(9, -24), S(33, -36), S(-5, -5), S(-1, -5), S(-11, -7), S(-38, -4), S(-27, -10), S(13, -30), S(79, -56), S(65, -36), S(48, -44), S(31, -34), S(1, -19), S(11, -31), S(-31, -15), S(3, -34), S(16, -41), S(17, -36), S(9, -30), S(16, -33), S(-7, -24), S(-21, -25), S(-36, -26), S(-36, -41), S(-19, -39), S(-44, -30), S(-44, -34), S(-43, -31), S(-53, -24), S(-53, -25), S(-54, -40), S(-49, -60), S(-28, -55), S(-54, -53), S(-53, -50), S(-54, -51), S(-62, -46), S(-55, -44), S(-61, -63), S(-75, -62), S(-39, -73), S(-42, -74), S(-40, -67), S(-41, -63), S(-45, -58), S(-56, -65), S(-86, -60), S(-37, -75), S(-25, -64), S(-38, -54), S(-39, -57), S(-37, -56), S(-45, -50), S(-49, -58), S(-53, -62), },
    {S(-1, 0), S(-17, 27), S(-40, 32), S(-70, 28), S(-75, 23), S(-69, 19), S(-67, 1), S(-73, -17), S(-40, 41), S(-132, 99), S(-57, 42), S(-135, 97), S(-134, 80), S(-103, 29), S(-130, 33), S(-102, 4), S(-87, 67), S(-42, 57), S(-44, 49), S(-77, 58), S(-97, 43), S(-92, 23), S(-87, -2), S(-97, 3), S(-72, 57), S(-62, 75), S(-88, 78), S(-97, 65), S(-105, 57), S(-104, 23), S(-92, 26), S(-86, -17), S(-62, 30), S(-76, 21), S(-86, 24), S(-99, 37), S(-98, 32), S(-95, 6), S(-88, 3), S(-85, -27), S(-61, -27), S(-67, -27), S(-86, -7), S(-87, -15), S(-91, -18), S(-86, -17), S(-80, -28), S(-88, -46), S(-71, -68), S(-65, -112), S(-73, -102), S(-78, -38), S(-82, -39), S(-76, -66), S(-82, -53), S(-83, -55), S(-77, -44), S(-90, -81), S(-96, -63), S(-79, -55), S(-79, -51), S(-85, -66), S(-86, -69), S(-81, -60), },
    {S(56, -182), S(116, -51), S(152, -74), S(77, -59), S(157, -55), S(229, -95), S(211, -115), S(65, -238), S(-88, -34), S(92, 38), S(158, 7), S(123, -1), S(179, -12), S(181, 6), S(124, 18), S(13, -43), S(-73, 2), S(121, 39), S(176, 52), S(163, 41), S(135, 51), S(197, 42), S(148, 34), S(47, -6), S(-90, -2), S(38, 34), S(102, 52), S(92, 79), S(74, 87), S(105, 63), S(94, 32), S(-6, -1), S(-157, -2), S(-14, 21), S(2, 54), S(22, 72), S(-3, 82), S(54, 55), S(10, 29), S(-82, -18), S(-143, -8), S(-67, 10), S(-68, 37), S(-51, 48), S(-58, 53), S(-63, 40), S(-71, 22), S(-131, -5), S(-98, -34), S(-72, -5), S(-100, 22), S(-96, 23), S(-121, 30), S(-85, 23), S(-84, 5), S(-106, -2), S(-127, -101), S(-102, -44), S(-186, -7), S(-123, -55), S(-172, -27), S(-119, -13), S(-95, -33), S(-153, -67), },
 };

// Score EvaluatePawns(Board &board, Color color, int &phase);
// Score EvaluateKnights(Board &board, Color color, int &phase);
// Score EvaluateBishops(Board &board, Color color, int &phase);
// Score EvaluateRooks(Board &board, Color color, int &phase);
// Score EvaluateQueens(Board &board, Color color, int &phase);
Score EvaluateMaterial(Board &board, PieceType piecetype, Color color, int &phase);
int Evaluate(Board &board, Color color);